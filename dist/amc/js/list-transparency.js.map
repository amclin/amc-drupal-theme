{"version":3,"sources":["js/list-transparency.js"],"names":["maxOpacity","minOpacity","screenMargin","sections","document","querySelectorAll","isOnScreen","el","elRects","getClientRects","winHeight","window","innerHeight","topIsOnscreen","top","bottomIsOnscreen","bottom","update","forEach","section","opacity","style","requestAnimationFrame","init","length"],"mappings":";;AAAA,IAAMA,UAAU,GAAG,CAAnB,C,CAAqB;;AACrB,IAAMC,UAAU,GAAG,GAAnB,C,CAAuB;;AACvB,IAAMC,YAAY,GAAG,IAArB,C,CAA0B;;AAC1B,IAAMC,QAAQ,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,iFAA1B,CAAjB;AAEA;AACA;AACA;AACA;AACA;;AACA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,EAAD,EAAQ;AACzB,MAAMC,OAAO,GAAGD,EAAE,CAACE,cAAH,GAAoB,CAApB,CAAhB;AACA,MAAMC,SAAS,GAAGC,MAAM,CAACC,WAAzB,CAFyB,CAGzB;;AACA,MAAMC,aAAa,GAAIL,OAAO,CAACM,GAAR,GAAeJ,SAAS,IAAI,IAAIR,YAAR,CAA/C,CAJyB,CAKzB;;AACA,MAAMa,gBAAgB,GAAIP,OAAO,CAACQ,MAAR,GAAkBN,SAAS,GAAGR,YAAxD;AAEA,SAAQW,aAAa,IAAIE,gBAAzB;AACD,CATD;AAWA;AACA;AACA;AACA;;;AACA,IAAME,MAAM,GAAG,SAATA,MAAS,GAAM;AACnBd,EAAAA,QAAQ,CAACe,OAAT,CAAiB,UAACC,OAAD,EAAa;AAC5B,QAAIC,OAAO,GAAGnB,UAAd;;AACA,QAAIK,UAAU,CAACa,OAAD,CAAd,EAAyB;AACvBC,MAAAA,OAAO,GAAGpB,UAAV;AACD;;AACDmB,IAAAA,OAAO,CAACE,KAAR,CAAcD,OAAd,GAAwBA,OAAxB;AACD,GAND;AAQAT,EAAAA,MAAM,CAACW,qBAAP,CAA6BL,MAA7B;AACD,CAVD;AAYA;AACA;AACA;;;AACA,IAAMM,IAAI,GAAG,SAAPA,IAAO,GAAM;AACjB;AACA,MAAIpB,QAAQ,CAACqB,MAAT,GAAkB,CAAtB,EAAyB;AACvBP,IAAAA,MAAM;AACP;AACF,CALD;;AAOAM,IAAI","sourcesContent":["const maxOpacity = 1 // Fully highlighted elements\nconst minOpacity = 0.5 // Defocused elements\nconst screenMargin = 0.25 // Top and bottom threshold to trigger transition\nconst sections = document.querySelectorAll('.region-content .view-content .views-row, .region-content .content .node-teaser')\n\n/**\n * Identifies if the element is within the defined display area\n * @param {Object}\n * @returns {Boolean}\n **/\nconst isOnScreen = (el) => {\n  const elRects = el.getClientRects()[0]\n  const winHeight = window.innerHeight\n  // Top of object is above bottom of viewport margin\n  const topIsOnscreen = (elRects.top < (winHeight * (1 - screenMargin)))\n  // Bottom of object is below the top of viewport margin\n  const bottomIsOnscreen = (elRects.bottom > (winHeight * screenMargin))\n\n  return (topIsOnscreen && bottomIsOnscreen)\n}\n\n/**\n * Sets the correct opacity for all elements and\n * iterates to the next animation frame\n **/\nconst update = () => {\n  sections.forEach((section) => {\n    let opacity = minOpacity\n    if (isOnScreen(section)) {\n      opacity = maxOpacity\n    }\n    section.style.opacity = opacity\n  })\n\n  window.requestAnimationFrame(update)\n}\n\n/**\n * Starts the sequence\n **/\nconst init = () => {\n  // Start the effects\n  if (sections.length > 0) {\n    update()\n  }\n}\n\ninit()\n"],"file":"list-transparency.js"}