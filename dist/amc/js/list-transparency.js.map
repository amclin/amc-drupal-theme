{"version":3,"file":"list-transparency.js","names":["maxOpacity","minOpacity","screenMargin","sections","document","querySelectorAll","isOnScreen","el","elRects","getClientRects","winHeight","window","innerHeight","topIsOnscreen","top","bottomIsOnscreen","bottom","update","forEach","section","opacity","style","requestAnimationFrame","init","length"],"sources":["js/list-transparency.js"],"sourcesContent":["const maxOpacity = 1 // Fully highlighted elements\nconst minOpacity = 0.5 // Defocused elements\nconst screenMargin = 0.25 // Top and bottom threshold to trigger transition\nconst sections = document.querySelectorAll('.region-content .view-content .views-row, .region-content .content .node-teaser')\n\n/**\n * Identifies if the element is within the defined display area\n * @param {Object}\n * @returns {Boolean}\n **/\nconst isOnScreen = (el) => {\n  const elRects = el.getClientRects()[0]\n  const winHeight = window.innerHeight\n  // Top of object is above bottom of viewport margin\n  const topIsOnscreen = (elRects.top < (winHeight * (1 - screenMargin)))\n  // Bottom of object is below the top of viewport margin\n  const bottomIsOnscreen = (elRects.bottom > (winHeight * screenMargin))\n\n  return (topIsOnscreen && bottomIsOnscreen)\n}\n\n/**\n * Sets the correct opacity for all elements and\n * iterates to the next animation frame\n **/\nconst update = () => {\n  sections.forEach((section) => {\n    let opacity = minOpacity\n    if (isOnScreen(section)) {\n      opacity = maxOpacity\n    }\n    section.style.opacity = opacity\n  })\n\n  window.requestAnimationFrame(update)\n}\n\n/**\n * Starts the sequence\n **/\nconst init = () => {\n  // Start the effects\n  if (sections.length > 0) {\n    update()\n  }\n}\n\ninit()\n"],"mappings":";;AAAA,MAAMA,UAAU,GAAG,CAAC,EAAC;AACrB,MAAMC,UAAU,GAAG,GAAG,EAAC;AACvB,MAAMC,YAAY,GAAG,IAAI,EAAC;AAC1B,MAAMC,QAAQ,GAAGC,QAAQ,CAACC,gBAAgB,CAAC,iFAAiF,CAAC;;AAE7H;AACA;AACA;AACA;AACA;AACA,MAAMC,UAAU,GAAIC,EAAE,IAAK;EACzB,MAAMC,OAAO,GAAGD,EAAE,CAACE,cAAc,EAAE,CAAC,CAAC,CAAC;EACtC,MAAMC,SAAS,GAAGC,MAAM,CAACC,WAAW;EACpC;EACA,MAAMC,aAAa,GAAIL,OAAO,CAACM,GAAG,GAAIJ,SAAS,IAAI,CAAC,GAAGR,YAAY,CAAG;EACtE;EACA,MAAMa,gBAAgB,GAAIP,OAAO,CAACQ,MAAM,GAAIN,SAAS,GAAGR,YAAc;EAEtE,OAAQW,aAAa,IAAIE,gBAAgB;AAC3C,CAAC;;AAED;AACA;AACA;AACA;AACA,MAAME,MAAM,GAAG,MAAM;EACnBd,QAAQ,CAACe,OAAO,CAAEC,OAAO,IAAK;IAC5B,IAAIC,OAAO,GAAGnB,UAAU;IACxB,IAAIK,UAAU,CAACa,OAAO,CAAC,EAAE;MACvBC,OAAO,GAAGpB,UAAU;IACtB;IACAmB,OAAO,CAACE,KAAK,CAACD,OAAO,GAAGA,OAAO;EACjC,CAAC,CAAC;EAEFT,MAAM,CAACW,qBAAqB,CAACL,MAAM,CAAC;AACtC,CAAC;;AAED;AACA;AACA;AACA,MAAMM,IAAI,GAAG,MAAM;EACjB;EACA,IAAIpB,QAAQ,CAACqB,MAAM,GAAG,CAAC,EAAE;IACvBP,MAAM,EAAE;EACV;AACF,CAAC;AAEDM,IAAI,EAAE"}