{"version":3,"file":"random-background.js","names":["jQuery","document","ready","$","getAPI","api","block","length","data","setBackground","url","css","getRandomImage","images","Math","floor","random","photo","field_photo","src","imageList","get","done","result","img","photos","fail","err","console","error"],"sources":["js/random-background.js"],"sourcesContent":["/* eslint-env jquery */\n\n/**\n * Applies a random background image for the page from a source list\n * provided from a REST API.\n */\njQuery(document).ready(function ($) {\n  /**\n     * Gets the API from where it's defined in the page source\n     */\n  const getAPI = function () {\n    let api\n    const block = $('#block-views-random-photo-block')\n    if (block.length === 1) {\n      api = block.data().api\n    }\n    return api\n  }\n\n  /**\n     * Sets the background image of the page\n     * @param {Url} url to the image\n     */\n  const setBackground = function (url) {\n    $('.region-background').css({\n      'background-image': `url(${url})`\n    })\n  }\n\n  /**\n     * Extracts a single random image from a list of photo objects\n     * @param {list} images Array of photo objects\n     * @returns {string} URL of image\n     */\n  const getRandomImage = function (images) {\n    var url\n    if (images.length > 0) {\n      url = images[Math.floor(Math.random() * images.length)].photo.field_photo.src\n    }\n    return url\n  }\n\n  const api = getAPI()\n\n  if (typeof api === 'string') {\n    var imageList = $.get({ url: api })\n\n    imageList.done((result) => {\n      var img = getRandomImage(result.photos)\n      setBackground(img)\n    }).fail((err) => {\n      console.error('Failed to get list of background images.', err)\n    })\n  }\n})\n"],"mappings":";;AAAA;;AAEA;AACA;AACA;AACA;AACAA,MAAM,CAACC,QAAQ,CAAC,CAACC,KAAK,CAAC,UAAUC,CAAC,EAAE;EAClC;AACF;AACA;EACE,MAAMC,MAAM,GAAG,YAAY;IACzB,IAAIC,GAAG;IACP,MAAMC,KAAK,GAAGH,CAAC,CAAC,iCAAiC,CAAC;IAClD,IAAIG,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE;MACtBF,GAAG,GAAGC,KAAK,CAACE,IAAI,EAAE,CAACH,GAAG;IACxB;IACA,OAAOA,GAAG;EACZ,CAAC;;EAED;AACF;AACA;AACA;EACE,MAAMI,aAAa,GAAG,UAAUC,GAAG,EAAE;IACnCP,CAAC,CAAC,oBAAoB,CAAC,CAACQ,GAAG,CAAC;MAC1B,kBAAkB,EAAG,OAAMD,GAAI;IACjC,CAAC,CAAC;EACJ,CAAC;;EAED;AACF;AACA;AACA;AACA;EACE,MAAME,cAAc,GAAG,UAAUC,MAAM,EAAE;IACvC,IAAIH,GAAG;IACP,IAAIG,MAAM,CAACN,MAAM,GAAG,CAAC,EAAE;MACrBG,GAAG,GAAGG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGH,MAAM,CAACN,MAAM,CAAC,CAAC,CAACU,KAAK,CAACC,WAAW,CAACC,GAAG;IAC/E;IACA,OAAOT,GAAG;EACZ,CAAC;EAED,MAAML,GAAG,GAAGD,MAAM,EAAE;EAEpB,IAAI,OAAOC,GAAG,KAAK,QAAQ,EAAE;IAC3B,IAAIe,SAAS,GAAGjB,CAAC,CAACkB,GAAG,CAAC;MAAEX,GAAG,EAAEL;IAAI,CAAC,CAAC;IAEnCe,SAAS,CAACE,IAAI,CAAEC,MAAM,IAAK;MACzB,IAAIC,GAAG,GAAGZ,cAAc,CAACW,MAAM,CAACE,MAAM,CAAC;MACvChB,aAAa,CAACe,GAAG,CAAC;IACpB,CAAC,CAAC,CAACE,IAAI,CAAEC,GAAG,IAAK;MACfC,OAAO,CAACC,KAAK,CAAC,0CAA0C,EAAEF,GAAG,CAAC;IAChE,CAAC,CAAC;EACJ;AACF,CAAC,CAAC"}